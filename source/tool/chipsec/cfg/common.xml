<?xml version="1.0"?>
<configuration>

  <mmio>
    <bar name="PXPEPBAR" bus="0" dev="0"    fun="0" reg="0x40" width="8" mask="0x7FFFFFF000" size="0x1000" enable_bit="0" desc="PCI Express Egress Port MMIO Range"/>
    <bar name="MCHBAR"   bus="0" dev="0"    fun="0" reg="0x48" width="8" mask="0x7FFFFF8000" size="0x8000" enable_bit="0" desc="Host Memory Mapped Register Range"/>
    <bar name="MMCFG"    bus="0" dev="0"    fun="0" reg="0x60" width="8" mask="0x7FFFFFF000" size="0x1000" enable_bit="0" desc="PCI Express Register Range"/>
    <bar name="DMIBAR"   bus="0" dev="0"    fun="0" reg="0x68" width="8" mask="0x7FFFFFF000" size="0x1000" enable_bit="0" desc="Root Complex Register Range"/>
    <bar name="GTTMMADR" bus="0" dev="2"    fun="0" reg="0x10" width="8" mask="0x7FFFC00000"                              desc="Graphics Translation Table Range"/>
    <bar name="GMADR"    bus="0" dev="2"    fun="0" reg="0x18" width="8" mask="0x7FF8000000"                              desc="Graphics Memory Range"/>
    <bar name="HDABAR"   bus="0" dev="3"    fun="0" reg="0x10" width="8" mask="0x7FFFFFF000" size="0x1000"                desc="HD Audio Base"/>
    <bar name="RCBA"     bus="0" dev="0x1F" fun="0" reg="0xF0" width="4" mask="0xFFFFC000"   size="0x4000" enable_bit="0" desc="Root Complex Base Address"/>
    <bar name="SPIBAR"   bus="0" dev="0x1F" fun="0" reg="0xF0" width="4" mask="0xFFFFC000"   size="0x200"  enable_bit="0" desc="SPI Controller Register Range" offset="0x3800"/>
    <!-- TODO
    <bar name="SPIBAR"   parent="RCBA" offset="0x3800" desc="SPI Controller Register Range"/>
    -->
  </mmio>

  <io>
    <bar name="PMBASE"   bus="0" dev="0x1F" fun="0" reg="0x40" mask="0xFF80" size="0x80" desc="ACPI Base Address"/>
  </io>

  <memory>
    <range name="Legacy DOS" type="dram" address="0x0"        size="0x100000"/>
    <range name="TPM"        type="mmio" address="0xFED40000" size="0x10000"/>
  </memory>

  <registers>

    <!-- B:D.F 00:00.0 -->
    <register name="PCI0.0.0_VID"        type="pcicfg" bus="0" dev="0" fun="0" offset="0x0"  size="2" desc="Vendor ID"/>
    <register name="PCI0.0.0_DID"        type="pcicfg" bus="0" dev="0" fun="0" offset="0x2"  size="2" desc="Device ID"/>
    <register name="PCI0.0.0_EPBAR"      type="pcicfg" bus="0" dev="0" fun="0" offset="0x40" size="8" desc="Egress Port Base Address"/>
    <register name="PCI0.0.0_MCHBAR"     type="pcicfg" bus="0" dev="0" fun="0" offset="0x48" size="8" desc="MCH Base Address"/>
    <register name="PCI0.0.0_GGC"        type="pcicfg" bus="0" dev="0" fun="0" offset="0x50" size="1" desc="Graphics Control"/>
    <register name="PCI0.0.0_DEVEN"      type="pcicfg" bus="0" dev="0" fun="0" offset="0x54" size="4" desc="Device Enables"/>
    <register name="PCI0.0.0_PAVPC"      type="pcicfg" bus="0" dev="0" fun="0" offset="0x58" size="4" desc="PAVP Configuration"/>
    <register name="PCI0.0.0_DPR"        type="pcicfg" bus="0" dev="0" fun="0" offset="0x5C" size="4" desc="DMA Protected Range"/>
    <register name="PCI0.0.0_PCIEXBAR"   type="pcicfg" bus="0" dev="0" fun="0" offset="0x60" size="8" desc="PCIe MMCFG Base Address"/>
    <register name="PCI0.0.0_DMIBAR"     type="pcicfg" bus="0" dev="0" fun="0" offset="0x68" size="8" desc="DMI Base Address"/>
    <register name="PCI0.0.0_MESEG_BASE" type="pcicfg" bus="0" dev="0" fun="0" offset="0x70" size="8" desc="ME UMA Base"/>
    <register name="PCI0.0.0_MESEG_MASK" type="pcicfg" bus="0" dev="0" fun="0" offset="0x78" size="8" desc="ME UMA Mask"/>
    <register name="PCI0.0.0_LAC"        type="pcicfg" bus="0" dev="0" fun="0" offset="0x87" size="1" desc="Legacy Access Control"/>
    <register name="PCI0.0.0_REMAPBASE"  type="pcicfg" bus="0" dev="0" fun="0" offset="0x90" size="8" desc="Memory Remap Base Address"/>
    <register name="PCI0.0.0_REMAPLIMIT" type="pcicfg" bus="0" dev="0" fun="0" offset="0x98" size="8" desc="Memory Remap Limit Address"/>
    <register name="PCI0.0.0_TOM"        type="pcicfg" bus="0" dev="0" fun="0" offset="0xA0" size="8" desc="Top of Memory"/>
    <register name="PCI0.0.0_TOUUD"      type="pcicfg" bus="0" dev="0" fun="0" offset="0xA8" size="8" desc="Top of Upper Usable DRAM"/>
    <register name="PCI0.0.0_BDSM"       type="pcicfg" bus="0" dev="0" fun="0" offset="0xB0" size="4" desc="Base of Graphics Stolen Memory"/>
    <register name="PCI0.0.0_BGSM"       type="pcicfg" bus="0" dev="0" fun="0" offset="0xB4" size="4" desc="Base of GTT Stolen Memory"/>
    <register name="PCI0.0.0_TSEGMB"     type="pcicfg" bus="0" dev="0" fun="0" offset="0xB8" size="4" desc="TSEG Memory Base"/>
    <register name="PCI0.0.0_TOLUD"      type="pcicfg" bus="0" dev="0" fun="0" offset="0xBC" size="4" desc="Top of Low Usable DRAM"/>
    <register name="PCI0.0.0_CAPID0"     type="pcicfg" bus="0" dev="0" fun="0" offset="0xE0" size="4" desc="Capability Identifier"/>
    <register name="PCI0.0.0_MID"        type="pcicfg" bus="0" dev="0" fun="0" offset="0xF8" size="8" desc="Manufacturing ID"/>

    <!-- B:D.F 00:1F.0 -->
    <register name="BC" type="pcicfg" bus="0" dev="0x1F" fun="0" offset="0xDC" size="1" desc="BIOS Control">
      <field name="BIOSWE"  bit="0" size="1"/>
      <field name="BLE"     bit="1" size="1"/>
      <field name="SRC"     bit="2" size="2"/>
      <field name="TSS"     bit="4" size="1"/>
      <field name="SMM_BWP" bit="5" size="1"/>
    </register>
    <register name="PR0" type="mmio" bar="SPIBAR" offset="0x74" size="4" desc="Protected Range 0">
      <field name="PRB" bit="0"  size="13"/>
      <field name="RPE" bit="15" size="1"/>
      <field name="PRL" bit="16" size="13"/>
      <field name="WPE" bit="31" size="1"/>
    </register>
    <register name="PR1" type="mmio" bar="SPIBAR" offset="0x78" size="4" desc="Protected Range 1">
      <field name="PRB" bit="0"  size="13"/>
      <field name="RPE" bit="15" size="1"/>
      <field name="PRL" bit="16" size="13"/>
      <field name="WPE" bit="31" size="1"/>
    </register>
    <register name="PR2" type="mmio" bar="SPIBAR" offset="0x7C" size="4" desc="Protected Range 2">
      <field name="PRB" bit="0"  size="13"/>
      <field name="RPE" bit="15" size="1"/>
      <field name="PRL" bit="16" size="13"/>
      <field name="WPE" bit="31" size="1"/>
    </register>
    <register name="PR3" type="mmio" bar="SPIBAR" offset="0x80" size="4" desc="Protected Range 3">
      <field name="PRB" bit="0"  size="13"/>
      <field name="RPE" bit="15" size="1"/>
      <field name="PRL" bit="16" size="13"/>
      <field name="WPE" bit="31" size="1"/>
    </register>
    <register name="PR4" type="mmio" bar="SPIBAR" offset="0x84" size="4" desc="Protected Range 4">
      <field name="PRB" bit="0"  size="13"/>
      <field name="RPE" bit="15" size="1"/>
      <field name="PRL" bit="16" size="13"/>
      <field name="WPE" bit="31" size="1"/>
    </register>
  </registers>

</configuration>